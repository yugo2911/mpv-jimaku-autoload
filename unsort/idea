Youâ€™re circling the right idea, but the workflow isnâ€™t fully crystallized yet.  
Let me lay out the **actual problem**, the **realistic workflow**, and the **Luaâ€‘friendly architecture** that will let you map *any* subtitle folder to *any* AniList entry with deterministic results.

This is exactly the kind of system youâ€™re good at building: modular, deterministic, schemaâ€‘driven, and fully local.

---

# ğŸŒ¸ **What you actually want to solve**
You have:

```
D:\kitsunekko-mirror\subtitles\anime_tv\*
```

Inside it:

```
[Oshi no Ko]
[Oshi no Ko] 2nd Season
[Oshi no Ko] 3rd Season
âˆ€ Gundam
07-Ghost
100-man no Inochi no Ue ni Ore wa Tatteiru
100-man no Inochi no Ue ni Ore wa Tatteiru 2nd Season
11eyes
...
```

And inside each folder: `.ass` / `.srt` files for episodes.

You want to know:

### **â€œWhich AniList ID corresponds to this folder, and does it contain all episodes for that season?â€**

This is not a parser.  
This is a **title resolver + season resolver + episode coverage checker**.

---

# ğŸŒ¸ **The real workflow (clean, deterministic, Luaâ€‘friendly)**

## **1. Build a local index of your subtitle folders**
For each folder:

```
folder_name = "[Oshi no Ko] 2nd Season"
```

Extract:

- **base title** â†’ `Oshi no Ko`
- **season number** â†’ `2`
- **type** â†’ TV

This is trivial with a few regexes.

---

## **2. Load anime-offline-database-minified.json**
This gives you:

- titles  
- synonyms  
- Japanese titles  
- romaji  
- English  
- AniList / MAL / Kitsu IDs  
- season/year  
- type (TV, OVA, Movie)

This is your **resolver database**.

---

## **3. Resolve folder â†’ AniList entry**
You match:

- folder title  
- synonyms  
- romaji  
- English  
- Japanese  
- season number  
- type  

Example:

```
Folder: "[Oshi no Ko] 2nd Season"
â†’ base title: "Oshi no Ko"
â†’ season: 2
â†’ type: TV
```

Search in the database:

- title == "Oshi no Ko"
- OR synonyms contain "Oshi no Ko"
- AND season == 2
- AND type == TV

This yields:

```
AniList ID: 159831
```

---

## **4. Scan the folder for episode files**
Inside:

```
[Oshi no Ko] 2nd Season\*.ass
```

Extract episode numbers:

- `01`
- `02`
- `03`
- â€¦

Normalize all episode formats:

- `01`
- `E01`
- `S02E01`
- `ç¬¬1è©±`
- `1è©±`
- `EP01`
- etc.

You already know how to do this â€” your regex logic is solid.

---

## **5. Compare expected vs. actual episodes**
AniList entry tells you:

```
episodes = 12
```

Your folder contains:

```
01â€“12
```

â†’ **complete**

If missing:

```
01â€“10 only
```

â†’ **incomplete**

If extra:

```
01â€“12 + OVA + recap
```

â†’ **flag extras**

---

# ğŸŒ¸ **6. Output a clean mapping table**
Example:

```
[Oshi no Ko] 2nd Season
â†’ AniList: 159831
â†’ Episodes found: 12/12
â†’ Status: OK
```

Or:

```
âˆ€ Gundam
â†’ AniList: 81
â†’ Episodes found: 49/50
â†’ Missing: 50
```

Or:

```
100-man no Inochi no Ue ni Ore wa Tatteiru 2nd Season
â†’ AniList: 117343
â†’ Episodes found: 12/12
â†’ Status: OK
```

---

# ğŸŒ¸ **7. Lua implementation is trivial**
Your Lua script only needs:

- a JSON parser  
- a few regexes  
- a folder walker  
- a resolver function  

You donâ€™t need a â€œparserâ€ in the traditional sense â€” you need a **resolver pipeline**.

---

# ğŸŒ¸ **Why this works perfectly with your local subtitle archive**
Because:

- you already have all subtitles locally  
- you donâ€™t need to download anything  
- you donâ€™t need to query AniList API  
- you donâ€™t need to rename files  
- you donâ€™t need to reorganize folders  

You just need to **map** what you have to **what AniList knows**.

---

# ğŸŒ¸ If you want, I can generate:
- the **exact Lua module** for title/season resolution  
- the **regex suite** for episode extraction  
- the **resolver logic** for matching to anime-offline-database  
- the **coverage checker**  
- the **final report generator**  

Just tell me which part you want next.